<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>상우현지 푸켓 3박 4일 여행일정 (11/15~11/18)</title>
  <style>
    body { font-family: 'Segoe UI', sans-serif; margin:0; padding:0; background:#f6f8fa; color:#222 }
    header { background: linear-gradient(90deg,#4b7bec,#a29bfe); color:#fff; padding:1.25rem; text-align:center }
    main { max-width:980px; margin:1.75rem auto; padding:1.25rem; background:#fff; border-radius:10px; box-shadow:0 8px 24px rgba(0,0,0,0.06) }
    .overview { color:#444; margin-bottom:1rem }
    .flight { background:#f1f3f8; padding:0.75rem; border-radius:6px; margin-bottom:1rem; color:#333 }
    .tabs { display:flex; gap:0.5rem; flex-wrap:wrap; margin-bottom:1rem }
    .tab-button { padding:0.5rem 0.75rem; border:1px solid #e6e9ef; background:#fff; border-radius:6px; cursor:pointer }
    .tab-button.active { background:#4b7bec; color:#fff; border-color:#4b7bec }
    .tab-content { display:none }
    .tab-content.active { display:block }
    .day { margin-bottom:1rem }
    .date { font-weight:700; color:#222; margin-bottom:0.5rem }
    ul { margin-top:0.25rem; padding-left:1.1rem }
    footer { text-align:center; padding:1rem; color:#888; font-size:0.9rem }
    @media (max-width:600px) { main { margin:1rem } .tabs { overflow:auto } }
  </style>
</head>
<body>
  <header>
    <h1>푸켓 3박 4일 여행일정</h1>
    <p class="muted">여행 기간: 2025년 11월 15일(출발) ~ 11월 18일(현지)</p>
  </header>

  <main>
    <div class="overview">
      <strong>항공 정보</strong>
      <div class="flight">
        항공편: 아시아나항공 (왕복) — 편명: <strong>OZ0747</strong> (인천→푸켓), <strong>OZ0748</strong> (푸켓→인천)<br>
        예약처: 하나투어<br>
        출발: 2025-11-15 17:00 → 푸켓 도착 2025-11-15 21:35<br>
        복귀: 2025-11-18 22:55 → 한국 도착 2025-11-19 07:15
      </div>
    </div>

    <!-- 비용 요약 카드 -->
    <div style="margin-bottom:1rem; display:flex; gap:1rem; flex-wrap:wrap; align-items:flex-start">
      <div style="flex:1; min-width:260px; background:#fff7e6; border:1px solid #ffe7c7; padding:0.85rem; border-radius:8px">
        <h3 style="margin:0 0 0.5rem 0; color:#a66300">비용 요약</h3>
        <ul style="margin:0; padding-left:1.1rem; color:#333">
          <li>항공권 (왕복, 아시아나 — <strong>OZ0747 / OZ0748</strong>): <strong id="cost-flight">742,000</strong>원</li>
          <li>공항→First 숙소 택시 (Klook): <strong id="cost-transfer">27,929</strong>원</li>
          <li>피피섬 투어 (Klook, 11/16 오전, 점심포함): <strong id="cost-pptour">87,040</strong>원</li>
          <li>숙소 1일차: <a href="https://www.google.com/maps/place/Burning+Flame+Patong" target="_blank" rel="noopener"><strong>Burning Flame Patong</strong></a> (Booking.com — 예약 완료: <strong id="cost-hotel-thb">708</strong> THB, 상태: <strong id="cost-hotel-usd">예약완료</strong>)</li>
          <li>숙소 2~3일차: <a href="https://www.google.com/maps/place/Saladee+Gallery+Residence" target="_blank" rel="noopener"><strong>Saladee Gallery Residence</strong></a> (Agoda, 2박: <strong id="cost-saladee">216,223</strong>원)</li>
          <li>마사지 (Sirapak Massage, 60분) — 예상: <strong id="cost-massage-thb">700</strong> THB (둘이서 합계) — ₩<span id="cost-massage-krw">0</span></li>
        </ul>
          <p style="margin-top:0.5rem">환율: <strong id="exchange-rate">45.68</strong> 원 / THB</p>
          <p style="margin-top:0.25rem">숙소 선결제(현지통화): <strong style="color:#d35400"><span id="cost-total-thb">0</span> THB</strong> — <span style="color:#d35400">₩<span id="cost-hotel-krw">0</span></span></p>
          <p style="margin-top:0.25rem">총 예상 비용(원화, 숙소 포함): <strong style="color:#d35400">₩<span id="cost-total-krw">0</span></strong></p>
            <p style="margin-top:0.25rem">총 예상 비용(원화, 로그 포함): <strong style="color:#d35400">₩<span id="cost-total-with-log">0</span></strong></p>
            <p style="margin-top:0.25rem; font-size:0.95rem; color:#333">(참고) Booking.com USD 환율 변환은 <em>1 USD = <span id="usd-rate">1461</span>원</em> 가정으로 계산됩니다.</p>
      </div>

      <div style="min-width:220px; background:#eef7ff; border:1px solid #cfe9ff; padding:0.75rem; border-radius:8px">
        <h4 style="margin:0 0 0.4rem 0; color:#1e6fff">이동 정보</h4>
        <p style="margin:0; color:#333">Klook 예약: 공항에서 <strong>Burning Flame Patong</strong>까지 택시 픽업(첫날 저녁)</p>
        <p style="margin:0.4rem 0 0 0; color:#333">11/16 오전 7:30 — Saladee Gallery Residence 앞 픽업(피피섬 투어). 복귀 시 <strong>올드타운(Old Town)</strong> 하차 요청 (저녁 식사 예정)</p>
      </div>
    </div>

    <!-- 지출 로그 (localStorage 기반 간단 DB) -->
    <div style="margin-bottom:1.25rem; display:flex; gap:1rem; flex-wrap:wrap">
      <div style="flex:1; min-width:300px; background:#ffffff; border:1px solid #e6eefc; padding:0.85rem; border-radius:8px">
        <h4 style="margin:0 0 0.5rem 0; color:#1e6fff">지출 기록</h4>
        <div style="display:flex; gap:0.5rem; flex-wrap:wrap; margin-bottom:0.5rem">
          <input id="log-date" type="date" style="padding:0.4rem; flex:1" />
          <input id="log-amount" type="number" placeholder="금액" style="padding:0.4rem; width:110px" />
          <select id="log-currency" style="padding:0.4rem; width:80px">
            <option value="KRW">KRW</option>
            <option value="THB">THB</option>
          </select>
          <input id="log-desc" type="text" placeholder="메모" style="padding:0.4rem; flex:2" />
        </div>
        <div style="display:flex; gap:0.5rem; margin-bottom:0.5rem">
          <button id="log-add" style="padding:0.4rem 0.75rem">추가</button>
          <button id="log-export" style="padding:0.4rem 0.75rem">내보내기 (JSON)</button>
          <label style="padding:0.4rem 0.75rem; background:#f3f6ff; border-radius:6px; cursor:pointer">
            가져오기 <input id="log-import" type="file" accept="application/json" style="display:none" />
          </label>
          <button id="log-clear" style="padding:0.4rem 0.75rem; margin-left:auto">초기화</button>
        </div>
        <div id="log-list" style="max-height:180px; overflow:auto; border-top:1px solid #f0f3ff; padding-top:0.5rem"></div>
      </div>
    </div>

    <!-- 환전 내역(참고) -->
    <div style="margin-bottom:1rem; display:flex; gap:1rem; flex-wrap:wrap; align-items:flex-start">
      <div style="flex:1; min-width:260px; background:#f7fff3; border:1px solid #e6f8e9; padding:0.85rem; border-radius:8px">
        <h4 style="margin:0 0 0.4rem 0; color:#27ae60">환전 내역 (참고)</h4>
        <p style="margin:0 0 0.25rem 0; color:#333">은행: <strong>우리은행</strong></p>
        <p style="margin:0 0 0.25rem 0; color:#333">환전금액: <strong>7,000 THB</strong> — 환율: <strong>45.68 원/THB</strong></p>
        <p style="margin:0; color:#d35400">원화 환전액: <strong>₩319,760</strong></p>
        <p style="margin-top:0.5rem; color:#666; font-size:0.9rem">참고: 페이지의 환율(45.68)은 동일하게 적용.</p>
      </div>
    </div>

    <div class="tabs" role="tablist" aria-label="일정 탭">
      <button class="tab-button active" data-tab="day1">1일차 (11/15)</button>
      <button class="tab-button" data-tab="day2">2일차 (11/16)</button>
      <button class="tab-button" data-tab="day3">3일차 (11/17)</button>
      <button class="tab-button" data-tab="day4">4일차 (11/18)</button>
      <button class="tab-button" data-tab="packing">준비물</button>
    </div>

    <section id="day1" class="tab-content active" role="tabpanel">
      <div class="day">
        <div class="date">1일차 — 2025-11-15 (도착일)</div>
        <ul>
          <li>17:00 — 인천 출발 (OZ0747)</li>
          <li>21:35 — 푸켓 도착, 입국 수속 후 Klook 택시로 <strong>Burning Flame Patong</strong> 이동 및 체크인</li>
          <li>숙소 예약: Booking.com (후불결제 $21.95 / 708 THB)</li>
        </ul>
      </div>
    </section>

    <section id="day2" class="tab-content" role="tabpanel">
      <div class="day">
        <div class="date">2일차 — 2025-11-16</div>
        <ul>
          <li>오전: Saladee Gallery Residence에 짐 보관</li>
          <li>07:30 — 픽업(클룩)으로 피피섬 / 마야베이 / 카이섬 투어 출발 (점심 포함)</li>
          <li>투어 결제(클룩): 87,040원</li>
            <li>투어 종료 후 복귀 경로에서 <strong>올드타운(Old Town)</strong> 하차 요청 — 저녁식사 장소: <a href="https://www.google.com/maps/place/1000009+Thai+Noodle+Restaurant+Phuket" target="_blank" rel="noopener"><strong>1000009 Thai Noodle Restaurant Phuket</strong></a>
            <ul style="margin-top:0.5rem; margin-bottom:0; padding-left:1.1rem; color:#333">
              <li>새우 팟타이: <strong id="menu-padthai-thb">89</strong> THB — ₩<span id="menu-padthai-krw">0</span></li>
              <li>돼지고기 꼬치: <strong id="menu-skew-thb">69</strong> THB — ₩<span id="menu-skew-krw">0</span></li>
              <li>새우 튀김: <strong id="menu-shrimp-thb">60</strong> THB — ₩<span id="menu-shrimp-krw">0</span></li>
              <li>쌀국수: <strong id="menu-pho-thb">80</strong> THB — ₩<span id="menu-pho-krw">0</span></li>
            </ul>
            <p style="margin:0.4rem 0 0 0; color:#d35400">저녁 예상 합계: <strong id="dinner-total-thb">0</strong> THB — ₩<strong id="dinner-total-krw">0</strong></p>
          </li>
        </ul>
      </div>
    </section>

    <section id="day3" class="tab-content" role="tabpanel">
      <div class="day">
        <div class="date">3일차 — 2025-11-17</div>
        <ul>
          <li>관심 투어(선택): 아래 옵션 중 골라 예약해보세요.</li>
          <li style="margin-top:0.5rem"><strong>1) Phuket Elephant Sanctuary (윤리적 코끼리 보호 센터)</strong>
            <div style="margin-top:0.25rem; color:#333">프로그램: Half-day / Canopy Walkway 등 — 소요 1.5~3.5시간 • 요금: 약 <strong id="elephant-price-thb">3,000</strong> THB</div>
            <div style="margin-top:0.25rem"><a href="https://www.phuketelephantsanctuary.org/programs/half-day/" target="_blank" rel="noopener">Phuket Elephant Sanctuary — 프로그램 페이지</a> • ₩<span id="elephant-price-krw">0</span></div>
          </li>
          <li style="margin-top:0.5rem"><strong>2) Big Buddha 방문 & 전망대</strong>
            <div style="margin-top:0.25rem; color:#333">특징: 사원/대형 불상 관람(입장 무료), 택시/투어로 반나절 소요 • 교통·가이드 포함 투어 예상: <strong id="bigbuddha-price-thb">400</strong> THB</div>
            <div style="margin-top:0.25rem"><a href="https://www.google.com/maps/place/Big+Buddha+Phuket" target="_blank" rel="noopener">Big Buddha 위치 (Google Maps)</a> • ₩<span id="bigbuddha-price-krw">0</span></div>
          </li>
          <li style="margin-top:0.5rem"><strong>3) Tiger Kingdom (타이거와 사진/교감 세션)</strong>
            <div style="margin-top:0.25rem; color:#333">특징: 포토세션/소규모 교감 가능(안전수칙 준수 필요) • 요금: 약 <strong id="tiger-price-thb">1,800</strong> THB</div>
            <div style="margin-top:0.25rem"><a href="https://www.tigerkingdomphuket.com/" target="_blank" rel="noopener">Tiger Kingdom Phuket</a> • ₩<span id="tiger-price-krw">0</span></div>
          </li>
          <li style="margin-top:0.5rem"><strong>4) 기타 옵션</strong>
            <div style="margin-top:0.25rem; color:#333">ATV, 짚라인, 현지 문화투어(차롱사원+시장) 등 — 소요/가격 다양</div>
            <div style="margin-top:0.25rem">예약 플랫폼: <a href="https://www.klook.com/" target="_blank" rel="noopener">Klook</a>, <a href="https://www.getyourguide.com/" target="_blank" rel="noopener">GetYourGuide</a></div>
          </li>
        </ul>
      </div>
    </section>

    <section id="day4" class="tab-content" role="tabpanel">
      <div class="day">
        <div class="date">4일차 — 2025-11-18 (출국일)</div>
        <ul>
          <li>오전: 체크아웃 전, 숙소에서 Sirapak Massage에 짐 맡기기 — 검색: <a href="https://www.google.com/maps/place/Sirapak+massage" target="_blank" rel="noopener">Sirapak Massage</a></li>
          <li>오전/낮: 워터파크 이동 및 이용 (물놀이) — 워터파크에서 시간 보내기</li>
          <li>이후: Sirapak Massage로 돌아와 60분 마사지(350 THB/인) — 둘이서 합계 <strong id="massage-thb-inline">700</strong> THB, ₩<span id="massage-krw-inline">0</span></li>
          <li>저녁: 공항 이동 및 출국 수속</li>
          <li>22:55 — 푸켓 출발 (한국 도착: 2025-11-19 07:15)</li>
        </ul>
      </div>
    </section>

    <section id="packing" class="tab-content" role="tabpanel">
      <div class="day">
        <div class="date">준비물 체크리스트</div>
        <ul>
          <li>충전기 (휴대폰용), 보조배터리</li>
          <li>핸드폰 및 여분 케이블</li>
          <li>속옷 여유분</li>
          <li>암튜브</li>
          <li>아쿠아슈즈</li>
          <li>수영복 / 비치타월</li>
          <li>여권, 항공권(모바일/인쇄), 예약확인(호텔/투어)</li>
          <li>현금(THB) 및 카드(해외결제 가능), 소액 동전</li>
          <li>세면도구(여행용), 선크림</li>
          <li>상비약 (진통제, 소화제, 밴드)</li>
          <li>멀티어댑터 / 변환 플러그</li>
          <li>지퍼백(방수/분리보관용), 물티슈</li>
        </ul>
      </div>
    </section>

  
  </main>

  <footer>
    ⓒ 2025 푸켓 여행 일정
  </footer>

  <script>
    // 탭 스위치 간단 스크립트
    const tabButtons = document.querySelectorAll('.tab-button');
    const tabContents = document.querySelectorAll('.tab-content');
    tabButtons.forEach(btn => btn.addEventListener('click', () => {
      tabButtons.forEach(b=>b.classList.remove('active'));
      tabContents.forEach(c=>c.classList.remove('active'));
      btn.classList.add('active');
      const id = btn.dataset.tab;
      document.getElementById(id).classList.add('active');
    }));
    
    // 비용 표시 계산 및 지출 로그 기능 (환율 고정)
    (function(){
      const EXCHANGE_RATE = 45.68; // 1 THB = 45.68 KRW (고정)
  const USD_TO_KRW = 1461; // 가정: 1 USD = 1461 KRW (변경 가능)

      function format(n){ return Number(n).toLocaleString(); }

  // 기본 비용
  const flight = Number(document.getElementById('cost-flight')?.innerText.replace(/,/g,'') || 0);
  const transfer = Number(document.getElementById('cost-transfer')?.innerText.replace(/,/g,'') || 0);
  const pptour = Number(document.getElementById('cost-pptour')?.innerText.replace(/,/g,'') || 0);
  const hotelTHB = Number(document.getElementById('cost-hotel-thb')?.innerText.replace(/,/g,'') || 0);
  const hotelKRW = Math.round(hotelTHB * EXCHANGE_RATE);
  const hotelUSDText = (document.getElementById('cost-hotel-usd')?.innerText || '$0').replace(/\$/,'').replace(/,/g,'');
  const hotelUSD = Number(hotelUSDText) || 0;
  const hotelUSDKRW = Math.round(hotelUSD * USD_TO_KRW);
  const saladee = Number(document.getElementById('cost-saladee')?.innerText.replace(/,/g,'') || 0);
  const massageTHB = Number(document.getElementById('cost-massage-thb')?.innerText.replace(/,/g,'') || 0);
  const massageKRW = Math.round(massageTHB * EXCHANGE_RATE);

    // 표시
    const elEx = document.getElementById('exchange-rate'); if(elEx) elEx.innerText = EXCHANGE_RATE;
    const elUsdRate = document.getElementById('usd-rate'); if(elUsdRate) elUsdRate.innerText = USD_TO_KRW;
    const elHotelKRW = document.getElementById('cost-hotel-krw'); if(elHotelKRW) elHotelKRW.innerText = format(hotelKRW);
    const elMassageKRW = document.getElementById('cost-massage-krw'); if(elMassageKRW) elMassageKRW.innerText = format(massageKRW);
    const elMassageInlineKRW = document.getElementById('massage-krw-inline'); if(elMassageInlineKRW) elMassageInlineKRW.innerText = format(massageKRW);
    // show converted hotel USD only when a numeric USD amount exists
    const hotelUsdShow = document.getElementById('cost-hotel-usd');
    if(hotelUsdShow && hotelUSD > 0){
      const span = document.createElement('span'); span.style.marginLeft='6px'; span.style.color='#666'; span.innerText = `(약 ₩${format(hotelUSDKRW)})`;
      hotelUsdShow.parentNode && hotelUsdShow.parentNode.insertBefore(span, hotelUsdShow.nextSibling);
    }

  const baseTotalKRW = flight + transfer + hotelKRW + hotelUSDKRW + saladee + pptour + massageKRW;
    const elBaseTotal = document.getElementById('cost-total-krw'); if(elBaseTotal) elBaseTotal.innerText = format(baseTotalKRW);
    const elTHB = document.getElementById('cost-total-thb'); if(elTHB) elTHB.innerText = format(hotelTHB);

    // dinner menu conversions (Day 2 - Old Town)
    const padthaiTHB = Number(document.getElementById('menu-padthai-thb')?.innerText.replace(/,/g,'') || 0);
    const skewTHB = Number(document.getElementById('menu-skew-thb')?.innerText.replace(/,/g,'') || 0);
    const shrimpTHB = Number(document.getElementById('menu-shrimp-thb')?.innerText.replace(/,/g,'') || 0);
    const phoTHB = Number(document.getElementById('menu-pho-thb')?.innerText.replace(/,/g,'') || 0);
    const dinnerTotalTHB = padthaiTHB + skewTHB + shrimpTHB + phoTHB;
    const padthaiKRW = Math.round(padthaiTHB * EXCHANGE_RATE);
    const skewKRW = Math.round(skewTHB * EXCHANGE_RATE);
    const shrimpKRW = Math.round(shrimpTHB * EXCHANGE_RATE);
    const phoKRW = Math.round(phoTHB * EXCHANGE_RATE);
    const dinnerTotalKRW = padthaiKRW + skewKRW + shrimpKRW + phoKRW;
    if(document.getElementById('menu-padthai-krw')) document.getElementById('menu-padthai-krw').innerText = format(padthaiKRW);
    if(document.getElementById('menu-skew-krw')) document.getElementById('menu-skew-krw').innerText = format(skewKRW);
    if(document.getElementById('menu-shrimp-krw')) document.getElementById('menu-shrimp-krw').innerText = format(shrimpKRW);
    if(document.getElementById('menu-pho-krw')) document.getElementById('menu-pho-krw').innerText = format(phoKRW);
    if(document.getElementById('dinner-total-thb')) document.getElementById('dinner-total-thb').innerText = format(dinnerTotalTHB);
    if(document.getElementById('dinner-total-krw')) document.getElementById('dinner-total-krw').innerText = format(dinnerTotalKRW);

  // Day 3 - suggested tours price conversions
  const elephantTHB = Number(document.getElementById('elephant-price-thb')?.innerText.replace(/,/g,'') || 0);
  const elephantKRW = Math.round(elephantTHB * EXCHANGE_RATE);
  if(document.getElementById('elephant-price-krw')) document.getElementById('elephant-price-krw').innerText = format(elephantKRW);

  const bigbuddhaTHB = Number(document.getElementById('bigbuddha-price-thb')?.innerText.replace(/,/g,'') || 0);
  const bigbuddhaKRW = Math.round(bigbuddhaTHB * EXCHANGE_RATE);
  if(document.getElementById('bigbuddha-price-krw')) document.getElementById('bigbuddha-price-krw').innerText = format(bigbuddhaKRW);

  const tigerTHB = Number(document.getElementById('tiger-price-thb')?.innerText.replace(/,/g,'') || 0);
  const tigerKRW = Math.round(tigerTHB * EXCHANGE_RATE);
  if(document.getElementById('tiger-price-krw')) document.getElementById('tiger-price-krw').innerText = format(tigerKRW);

      // 지출 로그 (localStorage 사용)
      const LOG_KEY = 'tripLog_v1';

      function loadLog(){
        try{ const raw = localStorage.getItem(LOG_KEY); return raw ? JSON.parse(raw) : []; }catch(e){ return []; }
      }
      function saveLog(list){ localStorage.setItem(LOG_KEY, JSON.stringify(list)); }

      function toKRW(amount, currency){
        if(!amount) return 0;
        if(currency === 'KRW') return Number(amount);
        if(currency === 'THB') return Math.round(Number(amount) * EXCHANGE_RATE);
        if(currency === 'USD') return Math.round(Number(amount) * USD_TO_KRW);
        return 0;
      }

      function renderLog(){
        const list = loadLog();
        const el = document.getElementById('log-list');
        if(!el) return;
        if(list.length === 0){ el.innerHTML = '<p style="color:#777; margin:0">기록이 없습니다.</p>'; }
        else{
          el.innerHTML = list.map((it,idx)=>{
            const krw = toKRW(it.amount, it.currency);
            return `<div style="padding:0.35rem 0; border-bottom:1px solid #f3f6ff"><strong>${it.date || ''}</strong> — ${it.desc || ''} : ${it.amount} ${it.currency} (₩${format(krw)}) <button data-idx="${idx}" style="float:right">삭제</button></div>`;
          }).join('');
        }
        // attach delete handlers
        el.querySelectorAll('button[data-idx]').forEach(b=> b.addEventListener('click', ()=>{
          const i = Number(b.dataset.idx); const l = loadLog(); l.splice(i,1); saveLog(l); renderLog(); updateTotalsWithLog();
        }));
      }

      function addLogEntry(entry){ const l = loadLog(); l.unshift(entry); saveLog(l); renderLog(); updateTotalsWithLog(); }

      function exportLog(){ const l = loadLog(); const blob = new Blob([JSON.stringify(l, null, 2)], {type:'application/json'}); const url = URL.createObjectURL(blob); const a = document.createElement('a'); a.href = url; a.download = 'trip-log.json'; document.body.appendChild(a); a.click(); a.remove(); URL.revokeObjectURL(url); }

      function importLogFile(file){ const reader = new FileReader(); reader.onload = e=>{ try{ const data = JSON.parse(e.target.result); if(Array.isArray(data)){ saveLog(data); renderLog(); updateTotalsWithLog(); } else alert('올바른 JSON 파일이 아닙니다.'); }catch(err){ alert('파일 읽기 실패'); } }; reader.readAsText(file); }

      // totals including logged expenses
      function updateTotalsWithLog(){
        const list = loadLog();
        const extraKRW = list.reduce((s,it)=> s + toKRW(it.amount, it.currency), 0);
        const totalWithLog = baseTotalKRW + extraKRW;
        const el = document.getElementById('cost-total-with-log'); if(el) el.innerText = format(totalWithLog);
      }

      // Auto-add specific entries if not present (avoid duplicates by desc match)
      (function autoAddDefaults(){
        let list = loadLog();
        function hasDesc(substr){ return list.some(it=> (it.desc||'').toString().toLowerCase().indexOf(substr.toLowerCase()) !== -1); }
        const today = new Date().toISOString().slice(0,10);
        // Clean up any existing Booking.com unpaid entries (user indicated 숙소는 이미 예약 완료)
        const filtered = list.filter(it=> (it.desc||'').toString().toLowerCase().indexOf('booking.com') === -1 && (it.desc||'').toString().toLowerCase().indexOf('booking') === -1);
        if(filtered.length !== list.length){ saveLog(filtered); list = filtered; }
        // 1) 우리은행 환전 7000 THB
        if(!hasDesc('우리은행 환전')){
          addLogEntry({date: today, amount: 7000, currency: 'THB', desc: '우리은행 환전 7,000 THB'});
        }
        // 2) Booking.com 호텔(후불) - 더이상 자동 추가하지 않음 (숙소 예약 완료)
        // 3) Sirapak 마사지 (둘이서 700 THB)
        if(!hasDesc('Sirapak') && massageTHB > 0){
          addLogEntry({date: today, amount: massageTHB, currency: 'THB', desc: 'Sirapak Massage (60min)'});
        }
      })();

      // wire up controls
      document.getElementById('log-add')?.addEventListener('click', ()=>{
        const date = document.getElementById('log-date')?.value || new Date().toISOString().slice(0,10);
        const amount = document.getElementById('log-amount')?.value;
        const currency = document.getElementById('log-currency')?.value || 'KRW';
        const desc = document.getElementById('log-desc')?.value || '';
        if(!amount){ alert('금액을 입력하세요'); return; }
        addLogEntry({date, amount: Number(amount), currency, desc});
        (document.getElementById('log-amount')).value = '';
        (document.getElementById('log-desc')).value = '';
      });

      document.getElementById('log-export')?.addEventListener('click', exportLog);
      document.getElementById('log-import')?.addEventListener('change', (e)=>{ const f = e.target.files?.[0]; if(f) importLogFile(f); });
      document.getElementById('log-clear')?.addEventListener('click', ()=>{ if(confirm('기록을 모두 삭제하시겠습니까?')){ saveLog([]); renderLog(); updateTotalsWithLog(); } });

      // initial render
      renderLog(); updateTotalsWithLog();
    })();
  </script>
</body>
</html>
